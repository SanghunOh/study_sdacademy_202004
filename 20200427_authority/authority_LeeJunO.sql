-- SQLite

DROP TABLE AUTHORITY;
DROP TABLE MEMBER;
DROP TABLE MEMBER_AUTHORITY;
DROP TABLE ORGANIZATION;


CREATE TABLE AUTHORITY
(
  AUTHORITY_ID TEXT NOT NULL,
  NAME         TEXT NULL    ,
  PRIMARY KEY (AUTHORITY_ID)
);


CREATE TABLE MEMBER
(
  MEMBER_ID        TEXT NOT NULL,
  NAME             TEXT NULL    ,
  EMAIL            TEXT NULL    ,  
  ORGANIZATION_SEQ REAL NOT NULL,
  PRIMARY KEY (MEMBER_ID),
  CONSTRAINT FK_ORGANIZATION_TO_MEMBER
    FOREIGN KEY (ORGANIZATION_SEQ)
    REFERENCES ORGANIZATION (ORGANIZATION_SEQ)
);

CREATE TABLE MEMBER_AUTHORITY
(
  AUTHORITY_ID TEXT NOT NULL,
  MEMBER_ID    TEXT NOT NULL,
  CONSTRAINT FK_AUTHORITY_TO_MEMBER_AUTHORITY
    FOREIGN KEY (AUTHORITY_ID)
    REFERENCES AUTHORITY (AUTHORITY_ID),
    CONSTRAINT FK_MEMBER_TO_MEMBER_AUTHORITY
    FOREIGN KEY (MEMBER_ID)
    REFERENCES MEMBER (MEMBER_ID)
);

CREATE TABLE ORGANIZATION
(
  ORGANIZATION_SEQ REAL NOT NULL,
  NAME             TEXT NULL    ,
  PRIMARY KEY (ORGANIZATION_SEQ)
);


INSERT INTO ORGANIZATION VALUES('ITBI','IT Billing');
INSERT INTO ORGANIZATION VALUES('ENGI','Engineering');

INSERT INTO MEMBER VALUES('MEM1','Paul','paul@gmail.com','ITBI');
INSERT INTO MEMBER VALUES('MEM2','Allen','texas@gmail.com','ENGI');
INSERT INTO MEMBER VALUES('MEM3','Teddy','norway@gmail.com','ITBI');

INSERT INTO AUTHORITY VALUES('01','GUEST');
INSERT INTO AUTHORITY VALUES('02','ADMIN');
INSERT INTO AUTHORITY VALUES('03','MANAGER');

INSERT INTO MEMBER_AUTHORITY VALUES('01','MEM1');
INSERT INTO MEMBER_AUTHORITY VALUES('02','MEM1');
INSERT INTO MEMBER_AUTHORITY VALUES('02','MEM2');
INSERT INTO MEMBER_AUTHORITY VALUES('02','MEM3');
INSERT INTO MEMBER_AUTHORITY VALUES('03','MEM1');
INSERT INTO MEMBER_AUTHORITY VALUES('03','MEM2');

