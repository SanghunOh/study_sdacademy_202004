-- SQLite

CREATE TABLE AUTHORITY
(
  AUTH_ID   FLOAT NOT NULL,
  AUTH_NAME TEXT  NULL    ,
  PRIMARY KEY (AUTH_ID)
);

CREATE TABLE MEMBER
(
  ID_EMAIL TEXT  NOT NULL,
  PASSWORD  TEXT  NULL    ,
  NAME      TEXT  NULL    ,
  BIRTHDATE FLOAT NULL    ,
  ADDRESS   TEXT  NULL    ,
  ORG_ID    FLOAT NOT NULL,
  PRIMARY KEY (ID_EMAIL),
  CONSTRAINT FK_ORGANIZATION_TO_MEMBER
    FOREIGN KEY (ORG_ID)
    REFERENCES ORGANIZATION (ORG_ID)
);

CREATE TABLE MEMBER_AUTHORITY
(
  ID_EMAIL TEXT  NOT NULL,
  AUTH_ID   FLOAT NOT NULL,
CONSTRAINT FK_MEMBER_TO_MEMBER_AUTHORITY
    FOREIGN KEY (ID_EMAIL)
    REFERENCES MEMBER (ID_EMAIL),
CONSTRAINT FK_AUTHORITY_TO_MEMBER_AUTHORITY
    FOREIGN KEY (AUTH_ID)
    REFERENCES AUTHORITY (AUTH_ID)
);

CREATE TABLE ORGANIZATION
(
  ORG_ID     FLOAT NOT NULL,
  ORG_NAME   TEXT  NULL    ,
  TEL_NO    FLOAT NULL    ,
  MANAGER_ID TEXT  NULL    ,
  PRIMARY KEY (ORG_ID)
);

CREATE TABLE ATTACHFILE
(
  FILE_ID   TEXT  NOT NULL,
  FILE_NAME TEXT  NULL    ,
  FILE_SIZE FLOAT NULL    ,
  FILE_TYPE TEXT  NULL    ,
  ID_EMAIL  TEXT  NOT NULL,
  BOARD_ID   TEXT NOT NULL,
  PRIMARY KEY (FILE_ID),
CONSTRAINT FK_MEMBER_TO_ATTACHFILE
    FOREIGN KEY (ID_EMAIL)
    REFERENCES MEMBER (ID_EMAIL),
CONSTRAINT FK_MULTI_BOARD_TO_ATTACHFILE
    FOREIGN KEY (BOARD_ID)
    REFERENCES MULTI_BOARD (BOARD_ID)
);


CREATE TABLE HOBBY
(
  HOBBY_ID TEXT NOT NULL,
  HOBBY    TEXT NULL    ,
  PRIMARY KEY (HOBBY_ID)
);

CREATE TABLE LOGHISTORY
(
  LOG_ID      TEXT NOT NULL,
  LOGIN TIME  TEXT NULL    ,
  LOGOUT TIME TEXT NULL    ,
  ID_EMAIL    TEXT NOT NULL,
  PRIMARY KEY (LOG_ID),
CONSTRAINT FK_MEMBER_TO_LOGHISTORY
    FOREIGN KEY (ID_EMAIL)
    REFERENCES MEMBER (ID_EMAIL)
);

CREATE TABLE PROJECT
(
  PRJ_ID   FLOAT NOT NULL,
  PRJ_NAME TEXT  NULL    ,
  THEME    TEXT  NULL    ,
  RANK     FLOAT NULL    ,
  DUE_DATE FLOAT NULL    ,
  PRIMARY KEY (PRJ_ID)
);

CREATE TABLE TEACHER
(
  TEACHER_ID TEXT  NOT NULL,
  NAME       TEXT  NULL    ,
  BIRTHDATE  FLOAT NULL    ,
  ROLL_NO    FLOAT NULL    ,
  ORG_ID     FLOAT NOT NULL,
  PRJ_ID     FLOAT NOT NULL,
  AUTH_ID    FLOAT NOT NULL,
  PRIMARY KEY (TEACHER_ID)
);

CREATE TABLE MULTI_BOARD
(
  BOARD_ID   TEXT NOT NULL,
  TITLE TEXT  NULL    ,
  FIELD    TEXT  NULL    ,
  CONTENT     TEXT NULL    ,
  DATE FLOAT NULL    ,
  ID_EMAIL    TEXT NOT NULL,
  PRIMARY KEY (BOARD_ID),
CONSTRAINT FK_MEMBER_TO_MULTI_BOARD
    FOREIGN KEY (ID_EMAIL)
    REFERENCES MEMBER (ID_EMAIL)  
);


-- INSERT VALUES

INSERT INTO MEMBER (ID_EMAIL, NAME, ORG_ID) VALUES ('PI01', 'Paul', 'DEPT1');
INSERT INTO MEMBER (ID_EMAIL, NAME, ORG_ID) VALUES ('AE01', 'Allen', 'DEPT2');
INSERT INTO MEMBER (ID_EMAIL, NAME, ORG_ID) VALUES ('TI01', 'Teddy', 'DEPT1');

INSERT INTO MULTI_BOARD (BOARD_ID, TITLE, FIELD, ID_EMAIL) VALUES ('board1', '용감한가족', '한국영화장르', 'PI01');
INSERT INTO MULTI_BOARD (BOARD_ID, TITLE, FIELD, ID_EMAIL) VALUES ('board2', '용감한자매','일본영화장르', 'AE01');
INSERT INTO MULTI_BOARD (BOARD_ID, TITLE, FIELD, ID_EMAIL) VALUES ('board3', '용감한형제','미국영화장르', 'AE01');

INSERT INTO ATTACHFILE (FILE_ID, FILE_NAME, ID_EMAIL, BOARD_ID) VALUES ('FILE1', 'poster.png', 'PI01', 'board1');
INSERT INTO ATTACHFILE (FILE_ID, FILE_NAME, ID_EMAIL, BOARD_ID) VALUES ('FILE2', 'actor.png', 'PI01', 'board1');
INSERT INTO ATTACHFILE (FILE_ID, FILE_NAME, ID_EMAIL, BOARD_ID) VALUES ('FILE3', 'poster02.png', 'AE01', 'board2');
INSERT INTO ATTACHFILE (FILE_ID, FILE_NAME, ID_EMAIL, BOARD_ID) VALUES ('FILE4', 'actor02.png', 'AE01', 'board2');
INSERT INTO ATTACHFILE (FILE_ID, FILE_NAME, ID_EMAIL, BOARD_ID) VALUES ('FILE5', 'poster03.png', 'AE01', 'board3');
INSERT INTO ATTACHFILE (FILE_ID, FILE_NAME, ID_EMAIL, BOARD_ID) VALUES ('FILE6', 'actor03.png', 'AE01', 'board3');


-- SELECT FEW COLUMNS
SELECT MEMBER.ID_EMAIL, MULTI_BOARD.TITLE, MULTI_BOARD.FIELD, ATTACHFILE.FILE_NAME
FROM MEMBER, MULTI_BOARD, ATTACHFILE
WHERE MEMBER.ID_EMAIL = MULTI_BOARD.ID_EMAIL
AND MEMBER.ID_EMAIL = ATTACHFILE.ID_EMAIL
AND MULTI_BOARD.BOARD_ID = ATTACHFILE.BOARD_ID;